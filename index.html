<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>obisims invoice gateway</title>
    <meta name="description" content="a multi-system payment gateway" />

    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/global.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cryptocoins-icons@2.9.0/webfont/cryptocoins.css">
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />

    <!-- Load Stripe.js on your website. -->
    <script src="https://js.stripe.com/v3/"></script>
    <script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
 
  <script src="https://use.fontawesome.com/releases/v5.14.0/js/all.js" data-auto-replace-svg="nest"></script>
  <!-- Production -->
<script src="https://unpkg.com/@popperjs/core@2"></script>
<!--<script src="https://unpkg.com/tippy.js@6"></script>-->
<script src="https://unpkg.com/tippy.js@6.2.5/dist/tippy-bundle.umd.min.js"></script>

<link
  rel="stylesheet"
  href="https://unpkg.com/tippy.js@6/animations/scale.css"
/>
<link
  rel="stylesheet"
  href="https://unpkg.com/tippy.js@6/themes/light.css"
/>
  <script>
 //var animationName = 'animate shake'
 $('#body').removeClass('hidden-load ')
 var animationEnd = 'webkitAnimationEnd mozAnimationEnd oanimationend animationend';

    const animateCSS = (element, animation, prefix = 'animate__') =>
    // We create a Promise and return it
    new Promise((resolve, reject) => {
    const animationName = `${prefix}${animation}`;
    //const node = document.querySelector(element);
      const $elem = $(element)
     // $($elem).removeClass('hidden-load')
    //node.classList.add(`${prefix}animated`, animationName);
      $elem.addClass(`${prefix}animated ${animationName}`).one(animationEnd,function(){
        $(this).removeClass(`${prefix}animated ${animationName}`)
        resolve('Animation ended');
      })
    // When the animation ends, we clean the classes and resolve the Promise
    
    /*
    function handleAnimationEnd() {
      node.classList.remove(`${prefix}animated`, animationName);
      resolve('Animation ended');
    }
    node.addEventListener('animationend', handleAnimationEnd, {once: true});
    */
  });
    function getParameterByName(name, url) {
      if (!url) url = window.location.href;
      name = name.replace(/[\[\]]/g, '\\$&');
      var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
          results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, ' '));
  }
  //?inv=thx-1138
  let bgs = new Object()
   bgs.base = {
   //   trump: 'https://i1.wp.com/media2.giphy.com/media/3oz8xrAQweeLfVIkzC/giphy.gif?zoom=2',
  //   keyboard: 'https://38.media.tumblr.com/546c0cd48d71f210f9b67a389003790d/tumblr_neq0yw9rMA1tm16jjo1_500.gif',
      abstract_circles:'https://cdn.dribbble.com/users/616823/screenshots/9121296/glowspin.gif',
      something:'https://i.gifer.com/C2Az.gif',
    //  abstract_circles:'https://cdn.dribbble.com/users/616823/screenshots/9121296/glowspin.gif',
     
    }
  bgs.good = {
    abstract_circles:bgs.base.abstract_circles,
    trump:bgs.base.trump,
    abstract_foldingCircles:'https://whileiamdying.files.wordpress.com/2014/08/tumblr_na8i9j4r471ts4htvo1_500.gif',
    bloodfloor:'https://i.gifer.com/Z4y6.gif',
    joyDivis:'https://i.gifer.com/2njo.gif'
  }
  bgs.bad = {
    cornermosh:'https://i.gifer.com/80bt.gif',
    badhairDry:'https://i.gifer.com/ECSH.gif',
    smoke:'https://i.gifer.com/8YuB.gif',
gremlinsCereal:'https://i.gifer.com/1qqA.gif',
droppedSmokes:'https://i.gifer.com/8Uhw.gif',
static:'https://i.gifer.com/29Q.gif',
catCrash:'https://i.gifer.com/Pazq.gif',
spike:'https://i.gifer.com/14jd.gif',
spikeBad:'https://i.gifer.com/3SGx.gif',
bebopLaugh:'https://i.gifer.com/14ji.gif',
killyou:'https://i.gifer.com/K6D3.gif',
white:'https://i.gifer.com/R9e5.gif',
eye:'https://i.gifer.com/6s4K.gif',
handEye:'https://i.gifer.com/XrTp.gif',
systemMalf:'https://i.gifer.com/1Wg8.gif',
clas:'https://i.gifer.com/j30.gif',
fuckk:'https://i.gifer.com/410L.gif',
lRun:'https://i.gifer.com/Iaot.gif',
lrun2:'https://i.gifer.com/7TW0.gif',
  }

  bgs.aesth={
strring:'https://i.gifer.com/380e.gif',
driving:'https://i.gifer.com/EaH.gif',
rain:'https://i.gifer.com/AI5S.gif',
smoke:'https://i.gifer.com/8YuB.gif',
cityNight:'https://i.gifer.com/7Tzm.gif',
retroHiFi:'https://i.gifer.com/4TKo.gif',
gremlinsCereal:'https://i.gifer.com/1qqA.gif',
head80s:'https://i.gifer.com/3cDp.gif',
spike:'https://i.gifer.com/14jd.gif',
spikeStand:'https://i.gifer.com/3SGv.gif',
rubux:'https://i.gifer.com/Syhw.gif',
washing:'https://i.gifer.com/6iTo.gif',
trains:'https://i.gifer.com/TTOl.gif',
shooter:'https://i.gifer.com/YUXs.gif',
flyer:'https://i.gifer.com/9vCi.gif',
spiral:'https://i.gifer.com/YmYu.gif'
  }
  // spike:'https://i.gifer.com/14jd.gif',
bgs.proffAesth={
 // abstract_circles:'https://cdn.dribbble.com/users/616823/screenshots/9121296/glowspin.gif',
  cityNight:'https://i.gifer.com/7Tzm.gif',
  spiral:'https://i.gifer.com/YmYu.gif',
  smoke:'https://i.gifer.com/8YuB.gif',
  daria:'https://i.gifer.com/1B4C.gif',
  bass:'https://i.gifer.com/QTbQ.gif',
  blackhole:'https://i.gifer.com/8FKI.gif',
 // whiteonRedBlotch:'https://i.gifer.com/1ZwF.gif',
//  rainingPixel:'https://i.gifer.com/33HI.gif',
  underbridge:'https://i.gifer.com/1zfb.gif',
  //balconyPixel:'https://i.gifer.com/6ElP.gif',
  catNightWindow:'https://i.gifer.com/HST2.gif',
  lowfiComet:'https://i.gifer.com/EFjf.gif',
  poluJap:'https://i.gifer.com/4RNU.gif',
  spiraling:'https://i.gifer.com/fy6O.gif',
  smokeSpiral:'https://i.gifer.com/746w.gif',
  zoomoutStall:'https://i.gifer.com/9vcx.gif',
  spiningnn:'https://i.gifer.com/3BAY.gif',
}
bgs.lineart={
 // abstract_circles:'https://cdn.dribbble.com/users/616823/screenshots/9121296/glowspin.gif',
pentinCage:'https://i.gifer.com/4RNe.gif',
wormer:'https://i.gifer.com/4P4d.gif',
zoomout:'https://i.gifer.com/7gS5.gif',
//abstract_circles:'https://cdn.dribbble.com/users/616823/screenshots/9121296/glowspin.gif',
boxes:'https://i.gifer.com/YYqc.gif',
squares:'https://i.gifer.com/ZVcG.gif',
lining:'https://i.gifer.com/7AzB.gif',
//abstract_circles:'https://cdn.dribbble.com/users/616823/screenshots/9121296/glowspin.gif',
box:'https://i.gifer.com/4Mg1.gif',
honeycomb:'https://i.gifer.com/4P4O.gif',
//crosses:'https://i.gifer.com/GTYq.gif',
star:'https://i.gifer.com/4Mg9.gif'
}
  bgs.punk={
glitchskull:'https://i.gifer.com/BPEw.gif',
cornermosh:'https://i.gifer.com/80bt.gif',
club:'https://i.gifer.com/UJoV.gif',
eye:'https://i.gifer.com/6s4K.gif',
clash:'https://i.gifer.com/j30.gif',
daria:'https://i.gifer.com/1B4C.gif',
bass:'https://i.gifer.com/QTbQ.gif',
fuckk:'https://i.gifer.com/410L.gif',
  }
  function pickRandomProperty(obj) {
    var result;
    var count = 0;
    for (var prop in obj)
        if (Math.random() < 1/++count)
           result = prop;
    return result;
}
    
    var randomProperty = function (obj) {
       var keys = Object.keys(obj);
       return obj[keys[ keys.length * Math.random() << 0]];
    };  

   function loadPageMain(){
      // or
      //$('body').css("background-color", '#291a2b'); 
                        //$('html').css("background-color", '#fffff'); 
     //document.body.parentElement.style.backgroundColor = "#291a2b"

      animateCSS('body', 'fadeIn slower').then((message) => {
              // Do something after the animation
              console.log('screenLoaded')

              var delayInMilliseconds_forFirstButton = 400; 
              setTimeout(function() {
               
               

                $('#button_stripe').removeClass('hidden-load')
                animateCSS('#button_stripe', 'fadeInLeft slow').then((message) => {
                  // Do something after the animation
                  console.log('we fadeIn')
                })
                
                var delayInMilliseconds_forSecondButton = 100; //1 second
                setTimeout(function() {
                  //your code to be executed after 1 second

                  $('#button_coinbase').removeClass('hidden-load')
                  animateCSS('#button_coinbase', 'fadeInLeft slow animate__delay-3s').then((message) => {

                    if(reff_paymentCancelled==true)$('section.container').css("background-color", 'rgba(41, 26, 43, 0.75)')

                  // Do something after the animation
                    console.log('we fadeIn')
                  //var $box = $(".testBox"),// cache container to avoid dom search each iteration
                  delay = 100; //time in ms
                  var $payIcons = $('.payIcon')

                  $('#mainLogo').removeClass('hidden-load')
                  animateCSS('#mainLogo', 'fadeIn')
                  var delayInMilliseconds_forLine = 100; //1 second
                  
                  setTimeout(function() {
                    $('#mainLogo_Line').removeClass('hidden-load')
                    animateCSS('#mainLogo_Line', 'fadeIn faster').then(function(){})
                    
                    var delayInMilliseconds_forTitle = 100;
                    setTimeout(function() {
                      $('.invoiceName').removeClass('hidden-load')
                      animateCSS('.invoiceName', 'fadeIn').then(function(){

                        $('.clientName').removeClass('hidden-load')
                        animateCSS('.clientName', 'fadeIn').then(function(){

                          $('.banner').removeClass('hidden-load')
                          animateCSS('.banner', 'fadeInUp slower')
                        })

                      })
                    },delayInMilliseconds_forTitle)


                  },delayInMilliseconds_forLine)


                  jQuery.each($payIcons, function(index, value) {
                    setTimeout(function() {
                      var thisID = $(value).attr("id")
                      console.log('loading payIcon:',value)
                      $('#'+thisID).removeClass('hidden-load')
                  //   $box.append('<p class="box">' + value + '</p>');
                      console.log(thisID);
                      animateCSS('#'+thisID, 'rotateIn animate__slow').then((message) => {
                        // Do something after the animation
                        console.log('we bounces')
                      });
                    }, index * delay)

                  });

                  
                     
                 




                  })


                  



                }, delayInMilliseconds_forSecondButton);

              }, delayInMilliseconds_forFirstButton);





             });



      
    }
    var reff_invoiceNum;
    var reff_priceId;
    var reff_price;
    var reff_clientName;
    var reff_redirectLoops;
$( document ).ready(function() {
  $('#body').removeClass('hidden-load')
   reff_invoiceNum = getParameterByName("inv") //?inv=thx-1138 = 'thx-1138'
 reff_priceId = getParameterByName("priceId")
 reff_price = parseFloat(getParameterByName("price"))
 reff_clientName = getParameterByName("clientName")
 reff_paymentCancelled = !(!getParameterByName("payment"))
 reff_ = window.location.search.substring(1)
 reff_redirectLoops = getParameterByName("redirectLoops")

 console.log('reff_:',reff_)
 console.log('reff_invoiceNum:',reff_invoiceNum)
 console.log('reff_priceId:',reff_priceId)
 console.log('reff_price:',reff_price)
 console.log('reff_paymentCancelled:',reff_paymentCancelled)
 console.log('reff_redirectLoops:',reff_redirectLoops)
//var reff_priceId = getParameterByName("priceId")

//console.log('Invoice num is',reff_invoiceNum);
 
  if(reff_priceId){
    if(reff_invoiceNum)$(".invoiceName").text(reff_invoiceNum.toUpperCase())
    if(reff_clientName){
      $(".clientName").text(reff_clientName)
    }else{
      $(".clientName").hide()
    }
    
    $("#button_stripe").attr('data-price-id',reff_priceId)// button_fullPay, button_depositPay
    if(reff_price){
      $("#button_stripe").removeClass('hasFA')
      $("#button_stripe").html('<span>Pay <span style="font-weight:700;">$'+reff_price.toFixed(2)+'</span></span>')
    }else{
      
      $("#button_stripe").html('<span>or pay with <span><i class="fab fa-stripe fa-2x faAdjust" ></i></span></span>')
    }
    
  }/*else{
    $("#button_fullPay").hide()
    $(".invoiceName").html(`<strong>Hold up!</strong> something wack is going on.
    <br><br>Should you be here?..`).css({ 'color': 'white', 'font-size': '225%' });
  }*/
  
  if(!reff_priceId){
    $("button#button_stripe").hide()
    $(".invoiceName").html(`Your link is busted dude!`).css({ 'color': 'white', 'font-size': '175%' });
   // $('html').css("background-image", "url("+bgs.keyboard+")"); 
    $('#duotone').css("background-size", "cover");  
    $('#duotone').css("background", `url(`+randomProperty(bgs.bad)+`) no-repeat center center fixed`)

    $(".clientName").text('you might need to talk to me...')   
    $('.banner').hide()
    $('.invoiceName').removeClass('hidden-load')
  }else{

  //  var bgImage = //bgs.good
  //  console.log('bgImage',bgImage)
    //$('html').css("background", `url(`+randomProperty(bgs.lineart)+`) no-repeat center center fixed`)
    //$('html').css("background-size", "cover");  
    
    if(reff_paymentCancelled==true){
      $('#duotone').removeClass('animate__animated animate__slideInRight animate__slow')
      var selectBGs = randomProperty({
        aesth:bgs.aesth,
        punk:bgs.punk,
        good:bgs.good,
        bad:bgs.bad,
        proffAesth:bgs.proffAesth,
        base:bgs.base
        }) || bgs.aesth ||bgs.punk ||bgs.good||bgs.bad //incase i delete a bg link obj and forget... which i will
      console.log('selectBGs:',selectBGs)
      //$('#duotone').css("background", `url("${randomProperty(selectBGs)}") no-repeat center center fixed`)
    }else{
      var selectBGs = bgs.lineart
      console.log('selectBGs:',selectBGs)
    }
    $('#duotone').css("background", `url("${randomProperty(selectBGs)}") no-repeat center center fixed`)
    
    $('#duotone').css("background-size", "cover");  
  /*  $('.container').css("backdrop-filter", "blur(10px)");*/
    loadPageMain();
  //rotateIn


  }
  //html { 
  /*(background:  url(https://i1.wp.com/media2.giphy.com/media/3oz8xrAQweeLfVIkzC/giphy.gif?zoom=2) no-repeat center center fixed; 
  
  /*$("#button_depositPay").attr('data-price-id',reff_priceId)
  $("#button_depositPay").text('Pay Deposit')*/
var price = ''
var data = ''
var data_a;
//console.log(stripe)
//console.log('gettingData')


  /*var price = stripe.prices.retrieve(
  reff_priceId //'price_1HSlhGEB9Gfp1i8Qe3ZofJlk'
);*/
//console.log('price:',price)
//console.log('data:',data)

});

    </script>

  </head>


  <body id="body" class="hidden-load">
    <div id="duotone" class="animate__animated animate__slideInRight animate__slow">
    </div>
    <div class="sr-root">
      <div class="sr-main" style="display: flex;">
        <!--
          <header class="sr-header">
          <div class="sr-header__logo"></div>
        </header>
      -->
        <div class="sr-container">
          <section class="container">
            <span style="position:relative;height:38px;margin: 0px 0px 35px 0px;">
              <h5 class="clientName hidden-load" style="padding-bottom: 15px;"></h5>
              <span style="position:relative;float:left;bottom: 4px;">
                <a id="mainLogo" class="hidden-load" target="_blank" href="https://obisims.com/"> <svg style="height:38px;float:left;" class="svgLink whiteSVG svg adjust" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20.3 29"><path class="svgLinkIcon" d="M17.7 22.2l2.7 2c-1.2 2.2-3.2 4.8-6 4.8 -1.5 0-3.1-1-4.6-2 -1.5-1-2.7-2-3.6-2 -1.3 0-2.4 1.2-3.6 3.3L0 26.4c1.4-2.1 3.2-4.9 6.1-4.9 2 0 3.5 1 4.8 2 1.3 1 2.4 2 3.3 2C15.8 25.6 16.5 24.1 17.7 22.2M3.8 9.9c0-3.5 2.8-6.5 6.4-6.5 3.5 0 6.4 2.9 6.4 6.5 0 3.5-2.8 6.5-6.3 6.5C6.6 16.4 3.8 13.4 3.8 9.9M20.1 9.9c0-5.6-4.4-9.9-9.9-9.9S0.2 4.3 0.2 9.9c0 5.6 4.4 9.9 9.9 9.9S20.1 15.5 20.1 9.9"/></svg></a>
                <h1 id="mainLogo_Line" class="hidden-load" style="float:right;">&nbsp;|&nbsp;</h1>
              </span>
              <h1 class="invoiceName hidden-load"></h1>
            </span>
            <button
            data-payment-mode="stripe"
            class="hidden-load hasFA payButton"  
            id="button_stripe"
              data-checkout-mode="payment"
            >
            <!-- data-price-id="price_1HSeabEB9Gfp1i8Q2LXEl78T" -->
              loading...<!--Pay $100.00 due-->
            </button>
           <!--<span style="color:white;" class="payIcons">
              <i class="far fa-credit-card fa-lg"></i> &nbsp;
              <i class="fas fa-university fa-lg"></i> &nbsp;
              <span class="faAdjust"><i class="fab fa-apple-pay fa-2x"></i></span>
            </span>-->
            <span style="color:white;padding-top:5px;" class="payIcons">
              <i title="Visa" class="tooltipped hidden-load payIcon fab fa-cc-visa fa-lg" id="pi1"></i> &nbsp;
              <i title="Mastercard" class="tooltipped hidden-load payIcon fab fa-cc-mastercard fa-lg" id="pi2"></i> &nbsp;
              <i title="Apple Pay" class="tooltipped hidden-load payIcon fab fa-cc-apple-pay fa-lg" id="pi3"></i> &nbsp;
              <i title="American Express" class="tooltipped hidden-load payIcon fab fa-cc-amex fa-lg" id="pi4"></i> &nbsp;
              <i title="JCB" class="tooltipped hidden-load payIcon fab fa-cc-jcb fa-lg" id="pi5"></i>
            </span>
            
           <!--<button
            id="button_depositPay"
              data-checkout-mode="payment"
              
            > data-price-id="price_1HSeabEB9Gfp1i8Q2LXEl78T" 
            loading...Pay $50.00 deposit
            </button>
            -->
            <button
            class="hidden-load payButton"
            id="button_coinbase"
            data-checkout-mode="payment"
            data-payment-mode="coinbase"
          >
          Pay Ƀ 
          </button>
          <span style="color:white; padding-top: 3px;" class="payIcons">
            <svg title="Bitcoin" id="pi6" class="tooltipped hidden-load payIcon crypto svg adjust"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 226.8 226.8"><path d="M135.7 122.2c-2.6-1.3-8.4-3.1-15.4-3.5 -6.9-0.5-15.8 0-15.8 0v30c0 0 9.3 0.2 15.5-0.3 6.2-0.5 12.6-2 15.8-3.8 3.2-1.8 7.1-4.5 7.1-11.4C142.9 126.4 138.3 123.6 135.7 122.2zM116.2 104.8c5.1-0.2 10.5-1.4 14.5-3.5 3.9-2.2 6.1-5.6 6-10.7 -0.1-5.1-3.5-9.4-9.3-11.2 -5.8-1.8-9.6-1.9-14-2 -4.4-0.1-8.8 0.3-8.8 0.3v27C104.5 104.8 111.1 105 116.2 104.8z"/><path d="M113.4 0C50.8 0 0 50.8 0 113.4 0 176 50.8 226.8 113.4 226.8S226.8 176 226.8 113.4C226.8 50.8 176 0 113.4 0zM159.6 156.8c-8.4 5.9-17.5 6.9-21.5 7.5 -2 0.3-5.3 0.5-9 0.7v22.7h-14v-22.4h-10.7v22.4h-14v-22.4H63l2.9-16.8h8.4c2.8 0 4-0.3 5.2-1.4 1.2-1.1 1.4-2.8 1.4-4.2V85.1c0-3.6-0.3-4.6-2-6.5 -1.7-1.9-5.6-2.1-7.8-2.1H63V61.9h27.5V39.5h14v22.4h10.7V39.5h14v22.7c10.4 0.6 18.2 2.6 25 7.6 8.8 6.5 8.3 17.7 8.1 20.4 -0.2 2.7-1.4 7.8-3.7 11.2 -2.4 3.3-8.1 6.7-8.1 6.7s6.8 1.4 11.6 5c4.8 3.6 8.3 9.9 8.1 19.2C169.9 141.7 168 150.9 159.6 156.8z"/></svg>&nbsp;
            <svg title="Bitcoin Cash" id="pi7" class="tooltipped hidden-load payIcon crypto svg adjust"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 227 227"><path d="M202.3 184h-40c22-15.4 36.4-41 36.4-69.8 0-28.9-14.4-54.4-36.4-69.8h41C182.6 17.4 150 0 113.3 0c-36.6 0-69.2 17.4-90 44.3h41c-22 15.4-36.4 41-36.4 69.8 0 28.9 14.4 54.4 36.4 69.8h-40c20.8 26.2 52.9 43 89 43C149.4 227 181.5 210.2 202.3 184L202.3 184zM45.6 131.1c-9.6-37.4 13-75.4 50.4-85 37.4-9.5 75.5 13 85 50.4 9.6 37.4-13 75.4-50.4 85C93.2 191.1 55.1 168.5 45.6 131.1z"/><path d="M150.1 116.5c-1.3-5.6-4.4-8.8-7.8-10.2s-7.7-1.2-7.7-1.2 2.9-2.9 3.8-5.2c0.9-2.3 0.8-5.6 0.5-7.2s-1.7-8.4-8-10.9c-4.8-2-9.8-2-16.1-0.8l-3.5-13.5 -8.4 2.1 3.4 13.4 -6.4 1.6 -3.4-13.4 -8.4 2.1 3.4 13.4 -16.4 4.2 2.2 8.7 4.8-1.2c1.3-0.3 3.7-0.8 5 0.1 1.3 0.9 1.6 1.4 2.2 3.6l8.8 34.6c0.2 0.8 0.3 1.9-0.2 2.7 -0.5 0.8-1.2 1.2-2.9 1.6l-5 1.3 0.8 10.5 16.4-4.2 3.4 13.3 8.4-2.1 -3.4-13.3 6.4-1.6 3.4 13.3 8.4-2.1 -3.5-13.6c2.1-0.7 4.1-1.4 5.2-1.8l0.2-0.1c2.4-0.9 7.5-3 11.5-7.6C151.7 127.9 151.4 122.1 150.1 116.5L150.1 116.5zM106.7 110.1l-4.1-16.1c0 0 2.6-0.9 5.2-1.5 2.6-0.6 5-1.1 8.7-1 3.7 0.2 6.4 2.2 7.3 5.3 0.9 3 0 5.4-2 7.3 -2 1.9-5.1 3.4-8.1 4.3C110.6 109.2 106.7 110.1 106.7 110.1zM131.5 129.1c-1.6 1.5-5.2 3.5-8.9 4.7 -3.6 1.2-9.2 2.5-9.2 2.5l-4.6-17.9c0 0 5.2-1.6 9.5-2.4 4.2-0.8 8-0.6 9.7-0.2 1.8 0.4 4.9 1.4 6 5.5C135 125.3 133.1 127.5 131.5 129.1z"/></svg>&nbsp;
            <svg title="Dai" id="pi8" class="tooltipped hidden-load payIcon crypto svg adjust"   xmlns="http://www.w3.org/2000/svg" viewBox="0 0 226.8 226.8"><path d="M113.3 0C50.7 0 0 50.7 0 113.3s50.7 113.3 113.3 113.3 113.3-50.7 113.3-113.3S175.9 0 113.3 0zM111.8 188.4L67.1 125l44.8 26.2V188.4L111.8 188.4zM111.8 142l-45.1-26.4 45.1-19.7V142L111.8 142zM111.8 92.6l-43.6 19.1 43.6-73.3C111.8 38.5 111.8 92.6 111.8 92.6zM114.8 38.4L159 112l-44.2-19.4C114.8 92.6 114.8 38.4 114.8 38.4zM114.8 188.4v-37.1l44.8-26.2L114.8 188.4 114.8 188.4zM114.8 142V95.8l45.1 19.8L114.8 142z"/></svg>&nbsp;
            <svg title="Ethereum" id="pi9" class="tooltipped hidden-load payIcon crypto svg adjust"   xmlns="http://www.w3.org/2000/svg" viewBox="0 0 226.8 226.8"><path d="M113.4 0C50.8 0 0 50.8 0 113.4c0 62.7 50.8 113.4 113.4 113.4 62.7 0 113.4-50.8 113.4-113.4C226.9 50.8 176.1 0 113.4 0zM157.5 168.8H68.8l7.4-35.6 -14.5 9.9 3.5-19.5 15.2-10.4 14.9-70.9H123L112.8 91l36-24.8 -4.2 20.2 -36 24.7 -7.1 33.9h61L157.5 168.8 157.5 168.8z"/></svg>&nbsp;
            <svg title="Litecoin" id="pi10" class="tooltipped hidden-load payIcon crypto svg adjust" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500"><path d="M182.3 342.1h75c35.4 0 66-20.4 80.7-50H182.3V342.1z"/><path d="M257.3 157.9h-75v51.3h156.3C324.1 178.9 293.2 157.9 257.3 157.9z"/><path d="M250 0C111.9 0 0 111.9 0 250s111.9 250 250 250 250-111.9 250-250S388.1 0 250 0zM398.8 236.2h-23.3c0.5 4.5 0.8 9.1 0.8 13.8 0 5.1-0.4 10.2-1 15.1h23.4v27h-30.2c-16.9 44.3-59.8 75.8-110.1 75.8H155.3v-75.8h-32.8v-27h32.8v-28.9h-32.8v-27h32.8v-77.1h103.1c50.8 0 94 32.1 110.6 77.1h29.7 0.1L398.8 236.2 398.8 236.2z"/><path d="M182.3 236.2v28.9h164.2c0.6-4.2 0.9-8.6 0.9-13V248c0-4-0.3-7.9-0.8-11.8H182.3z"/></svg></i>&nbsp;
            <svg title="USD Coin" id="pi11" class="tooltipped hidden-load payIcon crypto svg adjust" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500"><path d="M250 1.7C112.9 1.7 1.7 112.9 1.7 250S112.9 498.3 250 498.3 498.3 387.1 498.3 250 387.1 1.7 250 1.7zM203.5 422.7L203.5 422.7c-0.1 5.8-4.8 9.1-10.2 7.4C118.1 406 63.8 335.7 63.8 252.5c0-83 54.3-153.4 129.6-177.5 5.6-1.7 10.1 1.6 10.1 7.4v14.5c0 3.9-2.9 8.3-6.6 9.7 -59.6 21.9-102 79.1-102 145.9 0 66.9 42.5 124 102 145.7 3.7 1.4 6.6 5.8 6.6 9.7L203.5 422.7 203.5 422.7zM265.7 369h-0.2v-0.1c0 4.3-3.5 7.8-7.8 7.8h-15.5c-4.3 0-7.8-3.5-7.8-7.8v-24.4c-33.9-4.7-50.4-23.5-54.9-49.5 -0.8-4.5 2.7-8.3 7.2-8.3h17.7c3.7 0 6.8 2.7 7.6 6.2 3.3 15.3 12.2 27.2 39.4 27.2 20 0 34.3-11.3 34.3-27.9 0-16.7-8.3-23.1-37.8-27.9 -43.5-5.8-64-19-64-53 0-26.2 20-46.8 50.6-51v-24.1c0-4.3 3.5-7.8 7.8-7.8h15.5c4.3 0 7.8 3.5 7.8 7.8v24.6c25 4.5 40.9 18.6 46.2 42.3 1 4.5-2.5 8.5-7.2 8.5h-16.3c-3.5 0-6.4-2.3-7.4-5.6 -4.5-14.9-15.1-21.5-33.8-21.5 -20.6 0-31.2 9.9-31.2 23.9 0 14.7 6 22.1 37.6 26.6 42.7 5.8 64.8 18 64.8 54.3 0 27.5-20.6 49.9-52.6 54.9L265.7 369 265.7 369zM306.6 430c-5.6 1.7-10.1-1.6-10.1-7.4v-14.5c0-4.3 2.5-8.3 6.6-9.7 59.4-21.7 102-79 102-145.7 0-66.9-42.5-124-102-145.7 -3.7-1.4-6.6-5.8-6.6-9.7V82.8c0-5.8 4.7-9.1 10.1-7.4 75.3 23.7 129.6 94.1 129.6 177.1C436.2 335.7 381.9 406 306.6 430z"/></svg>
          </span>
          <script>
           
          const tippy_init = tippy('.tooltipped', {
            
            content(reference) {
              var thisCrypto = $(reference).attr('title')
              console.log('getContent',thisCrypto )
              return thisCrypto
            }
             

          });
// https://github.com/atomiks/tippyjs/issues/750
// https://atomiks.github.io/tippyjs/v6/plugins/
const hideOnEsc = {
  name: 'hideOnEsc',
  defaultValue: true,
  fn({hide}) {
    function onKeyDown(event) {
      if (event.keyCode === 27) {
        hide();
      }
    }

    return {
      onShow() {
        document.addEventListener('keydown', onKeyDown);
      },
      onHide() {
        document.removeEventListener('keydown', onKeyDown);
      },
    };
  },
};

          const hideOnPopperBlur = {
  name: 'hideOnPopperBlur',
  defaultValue: true,
  fn(instance) {
    return {
      onCreate() {
        instance.popper.addEventListener('focusout', (event) => {
          if (
            instance.props.hideOnPopperBlur &&
            event.relatedTarget &&
            !instance.popper.contains(event.relatedTarget)
          ) {
            instance.hide();
          }
        });
      },
    };
  },
};

       
      const singleton = tippy.createSingleton(tippy_init, {
                        placement: 'bottom',
                        // arrow: tippy.roundArrow,
                        // theme: 'light',
                        //maxWidth: "29rem",
                          theme:'light',
                        animation: 'scale',
                        inertia: true,
                        content(reference) {
                          var thisCrypto = $(reference).attr('title')
                          console.log('getContent',thisCrypto )
                          return thisCrypto
                        },
                        appendTo: () => document.body,
                        // appendTo: () => document.querySelector("table"),

                        allowHTML: true,
                        interactive: true,

                        a11y: true, // https://github.com/atomiks/tippyjs/issues/546, https://github.com/atomiks/tippyjs/issues/65#issuecomment-514796473
                        aria: {
                            content: 'describedby', // https://github.com/atomiks/tippyjs/issues/750#issuecomment-611662167
                        },

                        hideOnClick: false,
                        // For Debugging <https://atomiks.github.io/tippyjs/v5/themes/#browser-devtools>
                        // trigger: 'click',
                        trigger: 'mouseenter focus',


                        plugins: [hideOnEsc, hideOnPopperBlur],

                        // -----------------------------
                        // Singleton Specific
                        // https://atomiks.github.io/tippyjs/v5/addons/#singleton
                        // -----------------------------
                        // delay: [200, 200], // Issue #817: Hard to trigger
                        delay: [0, 0], // Issue #817: Easy to trigger

                        // https://github.com/atomiks/tippyjs/issues/773
                        // https://atomiks.github.io/tippyjs/v6/addons/
                        moveTransition: 'transform 0.4s cubic-bezier(0.22, 1, 0.36, 1)',


                        });


          </script>
          </section>
          
        </div>
        <div id="error-message"></div>
      </div>
    </div>
  
    <div class="banner hidden-load">
      <span>
        This is a
        <a target="_blank" href="https://stripe.com/en-au">
          <span><i class="fab fa-stripe fa-2x faAdjust" ></i></span></a> and
          <a target="_blank" href="https://www.coinbase.com/"><svg style="height:11px;position:relative;top:1px;" class="svgLink whiteSVG svg adjust" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 122 28"><style type="text/css">  
            .st0{fill-rule:evenodd;clip-rule:evenodd;}
          </style><path class="st0 svgLinkIcon" d="M10.3 23.9c0.9 0 1.8-0.2 2.6-0.5 0 0 1.7 2.6 1.7 2.6 -1.5 0.8-3.1 1.2-4.8 1.2 -5.1 0-8.9-3.4-8.9-8.8C1 13 4.9 9.6 9.9 9.6c1.8 0 3.1 0.4 4.5 1.1l-1.6 2.7c-0.8-0.3-1.7-0.5-2.6-0.5 -3 0-5.4 1.9-5.4 5.5C4.8 21.8 7.1 23.9 10.3 23.9zM23.3 9.6c5 0 8.7 3.6 8.7 8.8 0 5.2-3.6 8.8-8.7 8.8 -5 0-8.6-3.6-8.6-8.8C14.6 13.2 18.3 9.6 23.3 9.6zM23.3 12.8c-2.8 0-4.9 2.2-4.9 5.6 0 3.4 2 5.6 4.9 5.6 2.9 0 4.9-2.2 4.9-5.5C28.2 15 26.1 12.8 23.3 12.8zM34.3 26.8V10h3.8v16.8L34.3 26.8 34.3 26.8zM33.8 4.8c0.1-1.3 1.2-2.3 2.5-2.2 1.2 0.1 2.1 1 2.2 2.2 0 1.3-1 2.4-2.3 2.4C34.9 7.2 33.9 6.1 33.8 4.8L33.8 4.8zM41.4 11.1c2.5-0.9 5.1-1.4 7.7-1.4 4.3 0 7 1.6 7 6.4v10.8h-3.7V16.3c0-2.4-1.5-3.3-3.6-3.3 -1.3 0-2.7 0.2-3.7 0.5v13.3h-3.8L41.4 11.1 41.4 11.1zM59.3 1H63v9.4c0.8-0.4 2.3-0.8 3.8-0.8 4.9 0 8.5 3.1 8.5 8.5 0 5.4-3.6 9.1-9.8 9.1 -2.4 0-4.6-0.5-6.3-1.1V1zM63 23.6c0.7 0.2 1.7 0.4 2.6 0.4 3.4 0 5.9-1.9 5.9-5.8 0-3.3-2.3-5.2-5.2-5.2 -1.5 0-2.6 0.4-3.4 0.8C63 13.8 63 23.6 63 23.6zM86.2 15.5c0-1.8-1.4-2.7-3.2-2.7 -1.9 0-3.4 0.6-4.8 1.4V11c1.7-0.9 3.6-1.4 5.5-1.4 3.7 0 6.3 1.5 6.3 5.7v11.1c-1.6 0.4-3.9 0.7-5.8 0.7 -4.4 0-7.6-1.3-7.6-5.1 0-3.4 2.9-5.1 7.8-5.1h1.9L86.2 15.5 86.2 15.5zM86.2 19.4h-1.6c-2.6 0-4.3 0.8-4.3 2.5 0 1.7 1.6 2.4 3.9 2.4 0.6 0 1.4-0.1 2.1-0.2L86.2 19.4 86.2 19.4zM92.6 22.3c1.5 1.2 3.3 1.8 5.1 1.9 1.7 0 2.8-0.6 2.8-1.9 0-1.4-1-1.9-3.2-2.4 -3.5-0.8-5-2.2-5-5.1 0-3.4 2.6-5.1 6-5.1 1.9 0 3.4 0.4 4.8 1.3v3.4c-1.3-1.1-3-1.7-4.7-1.7 -1.6 0-2.5 0.8-2.5 1.9s0.7 1.7 2.7 2.2c3.8 0.8 5.5 2.3 5.5 5.3 0 3.5-2.7 5.1-6.3 5.1 -1.8 0-3.6-0.4-5.2-1.4L92.6 22.3 92.6 22.3zM109.3 19.3L109.3 19.3c0.2 3.1 2.8 4.7 5.4 4.7 2.3 0 4-0.5 5.7-1.6v3.3c-1.5 1.1-3.8 1.6-5.9 1.6 -5.2 0-8.8-3.3-8.8-8.6 0-5.4 3.5-8.9 8.1-8.9 4.9 0 7.2 3.1 7.2 7.7v1.9L109.3 19.3 109.3 19.3zM117.5 16.8c-0.1-2.6-1.4-4.1-3.8-4.1 -2.2 0-3.8 1.5-4.2 4.1H117.5z"/></svg></a> gateway by
        <a
          href="https://obisims.com"
        >
        <strong>obisims.com</strong> </a>
        &nbsp;|&nbsp;<a target="_blank" href="https://obisims.com/"> <svg style="height:14px;position:relative;top:4px;" class="svgLink whiteSVG svg adjust" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20.3 29"><path class="svgLinkIcon" d="M17.7 22.2l2.7 2c-1.2 2.2-3.2 4.8-6 4.8 -1.5 0-3.1-1-4.6-2 -1.5-1-2.7-2-3.6-2 -1.3 0-2.4 1.2-3.6 3.3L0 26.4c1.4-2.1 3.2-4.9 6.1-4.9 2 0 3.5 1 4.8 2 1.3 1 2.4 2 3.3 2C15.8 25.6 16.5 24.1 17.7 22.2M3.8 9.9c0-3.5 2.8-6.5 6.4-6.5 3.5 0 6.4 2.9 6.4 6.5 0 3.5-2.8 6.5-6.3 6.5C6.6 16.4 3.8 13.4 3.8 9.9M20.1 9.9c0-5.6-4.4-9.9-9.9-9.9S0.2 4.3 0.2 9.9c0 5.6 4.4 9.9 9.9 9.9S20.1 15.5 20.1 9.9"/></svg>
        </a>&nbsp;<a target="_blank" href="https://open.spotify.com/user/12121388895?si=hxgWcsPnQhq1_sheIraW0A"><span><i class="fab fa-spotify" ></i></span></a>
      </span>
    </div>

    <script>
      // Replace with your own publishable key: https://dashboard.stripe.com/test/apikeys
      var PUBLISHABLE_KEY = 'pk_live_518wo3qEB9Gfp1i8QifDcWocfocfuhEtZr6Bospg60FsnR37S6Lwt69I0EZ6hqsvul8POOgnNURETpwQOlVM3qdkO00WTqwMzVB'//'pk_test_518wo3qEB9Gfp1i8QucJ9mmE6GNat0hHIUoJD4oZJBfIuZwvhBYXLFaSJRMPwJTXGZvRWAjcKBqWKGbN7aS9ZKipg00SGxVEzsL'//'pk_test_Tr8olTkdFnnJVywwhNPHwnHK00HkHV4tnP';
      // Replace with the domain you want your users to be redirected back to after payment
      var DOMAIN = "https://invoice.obisims.com/"//"https://obisims.com/"; //location.href.replace(/[^/]*$/, '');


      var stripe = Stripe(PUBLISHABLE_KEY);

      // Handle any errors from Checkout
      var handleResult = function (result) {



        if (result.error) {
   

          var displayError = document.getElementById('error-message');
          displayError.textContent = result.error.message;
        }
      };


      document.querySelectorAll('button').forEach(function (button) {
        button.addEventListener('click', function (e) {
          var target = e.target
          var targetID = target.id
          
          console.log('[click] target',target)
          console.log('[click] targetID',targetID)
          
          if(!targetID){
            console.log('[click] targetID:',false)
            var parent = target.parentElement.parentElement
            console.log('[click] parent',parent)
            target = parent
          }else{
            console.log('[click] targetID:',true)
          }
          console.log('[click] target',target)
          
          
          var mode = target.dataset.checkoutMode;
          var priceId = target.dataset.priceId;

          var items = [{ price: priceId, quantity: 1 }];
          
          var thisDataset = target.dataset
          
          

          var paymentMode = target.dataset.paymentMode;
          // data-payment-mode="stripe"
          console.log('button clicked',paymentMode)
          animateCSS('body', 'fadeOut animate__slow').then((message) => {
                        // Do something after the animation
                       // $('body').addClass("hide-opacity"); 
                        //$('body').css("display", "none"); 
                        //$('body').css("background-color", '#fffff'); 
                        $('body').css("opacity", '0'); 
                        //$('html').css("background-color", '#fffff'); 
                        document.body.parentElement.style.backgroundColor = "#FFFFFF"
                        console.log('fadedOut')
                        
                        
                        var delayforRedirect = 1000;
                    setTimeout(function() {


                      if(paymentMode=='stripe'){
                                
                                
                                 // Make the call to Stripe.js to redirect to the checkout page
                                // with the sku or plan ID.
                                stripe.redirectToCheckout({
                                  mode: mode,
                                  lineItems: items,
                                  successUrl:
                                    DOMAIN + 'success.html?session_id={CHECKOUT_SESSION_ID}&payment=paid'+'&'+window.location.search.substring(1),
                                  cancelUrl:
                                    DOMAIN + 'canceled.html?session_id={CHECKOUT_SESSION_ID}&payment=canceled'+'&'+window.location.search.substring(1),
                                }).catch(function(rejected){
                                  console.log(rejected);
                                  //err.message;
                                  $('body').css("opacity", '1'); 
                                  document.body.parentElement.style.backgroundColor = "#291a2b"
                                  animateCSS('body', 'fadeIn animate__slow').then((message) => {
                                    console.log('error - faded back in')
                                  })    
                              }).then(handleResult);
                                

                              }else if(paymentMode=='coinbase'){
                                window.location.href="https://crypto.obisims.com/"+reff_invoiceNum; 
                                //window.
                              }

                    },delayforRedirect)



                      
                      });
          
         
        });
      });
    </script>
   
  </body>
</html>


